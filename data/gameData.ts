
// Constants for step IDs
const STEP_IDS = {
  FACULTY: {
    STEP_1: 'FACULTY_STEP_1',
    STEP_2: 'FACULTY_STEP_2',
    STEP_3: 'FACULTY_STEP_3',
  },
  JOB: {
    STEP_1: 'JOB_STEP_1',
    STEP_2: 'JOB_STEP_2',
    STEP_3: 'JOB_STEP_3',
  },
  HOUSING: {
    STEP_1: 'HOUSING_STEP_1',
    STEP_2: 'HOUSING_STEP_2',
    STEP_3: 'HOUSING_STEP_3',
  },
} as const;

// Constants for choice IDs
const CHOICE_IDS = {
  FACULTY: {
    STEP_1: {
      CHOICE_1: 'FACULTY_STEP_1_CHOICE_1',
      CHOICE_2: 'FACULTY_STEP_1_CHOICE_2',
      CHOICE_3: 'FACULTY_STEP_1_CHOICE_3',
    },
    STEP_2: {
      CHOICE_1: 'FACULTY_STEP_2_CHOICE_1',
      CHOICE_2: 'FACULTY_STEP_2_CHOICE_2',
      CHOICE_3: 'FACULTY_STEP_2_CHOICE_3',
      CHOICE_4: 'FACULTY_STEP_2_CHOICE_4',
      CHOICE_5: 'FACULTY_STEP_2_CHOICE_5',
    },
    STEP_3: {
      CHOICE_1: 'FACULTY_STEP_3_CHOICE_1',
      CHOICE_2: 'FACULTY_STEP_3_CHOICE_2',
      CHOICE_3: 'FACULTY_STEP_3_CHOICE_3',
      CHOICE_4: 'FACULTY_STEP_3_CHOICE_4',
      CHOICE_5: 'FACULTY_STEP_3_CHOICE_5',
    },
  },
  JOB: {
    STEP_1: {
      CHOICE_1: 'JOB_STEP_1_CHOICE_1',
      CHOICE_2: 'JOB_STEP_1_CHOICE_2',
      CHOICE_3: 'JOB_STEP_1_CHOICE_3',
    },
    STEP_2: {
      CHOICE_1: 'JOB_STEP_2_CHOICE_1',
      CHOICE_2: 'JOB_STEP_2_CHOICE_2',
      CHOICE_3: 'JOB_STEP_2_CHOICE_3',
      CHOICE_4: 'JOB_STEP_2_CHOICE_4',
      CHOICE_5: 'JOB_STEP_2_CHOICE_5',
    },
    STEP_3: {
      CHOICE_1: 'JOB_STEP_3_CHOICE_1',
      CHOICE_2: 'JOB_STEP_3_CHOICE_2',
      CHOICE_3: 'JOB_STEP_3_CHOICE_3',
      CHOICE_4: 'JOB_STEP_3_CHOICE_4',
      CHOICE_5: 'JOB_STEP_3_CHOICE_5',
    },
  },
  HOUSING: {
    STEP_1: {
      CHOICE_1: 'HOUSING_STEP_1_CHOICE_1',
      CHOICE_2: 'HOUSING_STEP_1_CHOICE_2',
      CHOICE_3: 'HOUSING_STEP_1_CHOICE_3',
    },
    STEP_2: {
      CHOICE_1: 'HOUSING_STEP_2_CHOICE_1',
      CHOICE_2: 'HOUSING_STEP_2_CHOICE_2',
      CHOICE_3: 'HOUSING_STEP_2_CHOICE_3',
      CHOICE_4: 'HOUSING_STEP_2_CHOICE_4',
      CHOICE_5: 'HOUSING_STEP_2_CHOICE_5',
    },
    STEP_3: {
      CHOICE_1: 'HOUSING_STEP_3_CHOICE_1',
      CHOICE_2: 'HOUSING_STEP_3_CHOICE_2',
      CHOICE_3: 'HOUSING_STEP_3_CHOICE_3',
      CHOICE_4: 'HOUSING_STEP_3_CHOICE_4',
      CHOICE_5: 'HOUSING_STEP_3_CHOICE_5',
    },
  },
} as const;

export interface Choice {
  id: string;
  text: string;
  personalStateChange: number;
  socialRelationsChange: number;
  blocks?: string[]; // Which choice IDs this choice blocks in future questions
}

export interface StoryNode {
  id: string;
  text: string;
  situation?: string;
  sceneId: string;
  stepIndex: number;
  allChoices: Choice[]; // All possible choices for this question
}

export interface ChoiceEdge {
  id: string; // Same as choice.id
  fromNode: string; // Which question this choice comes from
  toNode: string; // Which question this choice leads to (always next in sequence)
  choice: Choice; // The actual choice data
  blocks: string[]; // Which choice IDs this edge blocks
}

export interface StoryGraph {
  nodes: Map<string, StoryNode>;
  edges: Map<string, ChoiceEdge>;
}

export interface Character {
  gender: 'male' | 'female';
  name: string;
  description: string;
  avatar: string;
}

export interface GameState {
  currentScene: number;
  currentStep: number;
  personalState: number;
  socialRelations: number;
  decisions: string[];
  introspectionMode: boolean;
  selectedCharacter?: Character;
  characterSelected: boolean;
}

export const characters: Character[] = [
  {
    gender: 'male',
    name: '',
    description: 'Un t√¢nƒÉr ambi»õios care √Æ»ôi √Æncepe cƒÉlƒÉtoria prin via»õƒÉ',
    avatar: 'üë®‚Äçü¶Ω'
  },
  {
    gender: 'female',
    name: '',
    description: 'O t√¢nƒÉrƒÉ determinatƒÉ care √Æ»ôi urmeazƒÉ visurile',
    avatar: 'üë©‚Äçü¶Ω'
  }
];

export const gameData = {
  scenes: [
    {
      title: "Facultatea",
      steps: [
        {
          id: STEP_IDS.FACULTY.STEP_1,
          text: "Este prima zi la facultate »ôi e»ôti entuziasmat de noua etapƒÉ. Ajungi la facultate »ôi observi cƒÉ nu existƒÉ rampƒÉ sau u»ôƒÉ de acces √Æn clƒÉdire accesibile.",
          situation: "Prima zi la facultate",
          choices: [
            {
              id: CHOICE_IDS.FACULTY.STEP_1.CHOICE_1,
              text: "Refuzi orice ajutor »ôi pleci acasƒÉ",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.FACULTY.STEP_2.CHOICE_1, CHOICE_IDS.FACULTY.STEP_2.CHOICE_5]
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_1.CHOICE_2,
              text: "Suni un prieten sƒÉ te ajute »ôi explici calm cum sƒÉ procedeze",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.FACULTY.STEP_2.CHOICE_2, CHOICE_IDS.FACULTY.STEP_2.CHOICE_4]
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_1.CHOICE_3,
              text: "Spui nemul»õumirea portarului, fƒÉrƒÉ rezultat",
              personalStateChange: 0,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.FACULTY.STEP_2.CHOICE_3, CHOICE_IDS.FACULTY.STEP_2.CHOICE_5]
            }
          ],
        },
        {
          id: STEP_IDS.FACULTY.STEP_2,
          text: "Ai reu»ôit sƒÉ ajungi √Æn clƒÉdire, dar te confrun»õi cu o u»ôƒÉ greu accesibilƒÉ pentru a intra √Æn amfiteatru.",
          situation: "Acces √Æn amfiteatru",
          choices: [
            {
              id: CHOICE_IDS.FACULTY.STEP_2.CHOICE_1,
              text: "√éncerci sƒÉ o deschizi singur treptat, de»ôi √Æ»õi va lua mult timp »ôi va fi greu",
              personalStateChange: 5,
              socialRelationsChange: 0,
              blocks: [CHOICE_IDS.FACULTY.STEP_3.CHOICE_4, CHOICE_IDS.FACULTY.STEP_3.CHOICE_5]
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_2.CHOICE_2,
              text: "Chemi pe cineva sƒÉ te ajute",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.FACULTY.STEP_3.CHOICE_1, CHOICE_IDS.FACULTY.STEP_3.CHOICE_3]
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_2.CHOICE_3,
              text: "A»ôtep»õi p√¢nƒÉ o sƒÉ vinƒÉ un profesor",
              personalStateChange: 0,
              socialRelationsChange: 0,
              blocks: [CHOICE_IDS.FACULTY.STEP_3.CHOICE_2, CHOICE_IDS.FACULTY.STEP_3.CHOICE_4]
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_2.CHOICE_4,
              text: "√é»õi modifici locul »ôi stai la o altƒÉ intrare mai u»ôor accesibilƒÉ",
              personalStateChange: 0,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.FACULTY.STEP_3.CHOICE_1, CHOICE_IDS.FACULTY.STEP_3.CHOICE_2]
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_2.CHOICE_5,
              text: "Renun»õi sƒÉ participi la curs",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.FACULTY.STEP_3.CHOICE_2, CHOICE_IDS.FACULTY.STEP_3.CHOICE_5]
            }
          ],
        },
        {
          id: STEP_IDS.FACULTY.STEP_3,
          text: "√én pauzƒÉ, realizezi cƒÉ nu existƒÉ baie accesibilƒÉ pentru persoanele √Æn scaun cu rotile.",
          situation: "Probleme cu grupurile sanitare",
          choices: [
            {
              id: CHOICE_IDS.FACULTY.STEP_3.CHOICE_1,
              text: "Mergi la primul magazin cu baie accesibilƒÉ",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: []
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_3.CHOICE_2,
              text: "Pleci acasƒÉ nervos",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: []
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_3.CHOICE_3,
              text: "Chemi pe cineva sƒÉ te ajute",
              personalStateChange: 0,
              socialRelationsChange: 5,
              blocks: []
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_3.CHOICE_4,
              text: "A»ôtep»õi sƒÉ se elibereze o altƒÉ baie",
              personalStateChange: 5,
              socialRelationsChange: 0,
              blocks: []
            },
            {
              id: CHOICE_IDS.FACULTY.STEP_3.CHOICE_5,
              text: "Folose»ôti o solu»õie improvizatƒÉ √Æn siguran»õƒÉ",
              personalStateChange: 0,
              socialRelationsChange: 0,
              blocks: []
            }
          ],
        },
      ],
      introspection: {
        text: "Prima sƒÉptƒÉm√¢nƒÉ de facultate s-a √Æncheiat. Te g√¢nde»ôti la experien»õele trƒÉite »ôi la cum te-au afectat rela»õiile personale »ôi integrarea √Æn societate.",
        positiveChoice: "Valoarea mea nu este datƒÉ de un cƒÉrucior cu rotile",
        negativeChoice: "Este foarte greu sƒÉ fiu iubit √Æn aceastƒÉ ipostazƒÉ",
      },
    },

    {
      title: "Locul de MuncƒÉ",
      steps: [
        {
          id: STEP_IDS.JOB.STEP_1,
          text: "√éncerci sƒÉ gƒÉse»ôti un loc de muncƒÉ √Æn IT dupƒÉ accident, dar colegii pun la √ÆndoialƒÉ capacitƒÉ»õile tale.",
          situation: "Domeniu de aplicare ‚Äì IT",
          choices: [
            {
              id: CHOICE_IDS.JOB.STEP_1.CHOICE_1,
              text: "Le explici ce po»õi face",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.JOB.STEP_2.CHOICE_1, CHOICE_IDS.JOB.STEP_2.CHOICE_5]
            },
            {
              id: CHOICE_IDS.JOB.STEP_1.CHOICE_2,
              text: "Ignori »ôi acumulezi durerea √Æn tine",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.JOB.STEP_2.CHOICE_1, CHOICE_IDS.JOB.STEP_2.CHOICE_3]
            },
            {
              id: CHOICE_IDS.JOB.STEP_1.CHOICE_3,
              text: "Le rƒÉspunzi cu duritate, fƒÉc√¢ndu-i sƒÉ se simtƒÉ ru»ôina»õi",
              personalStateChange: 5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.JOB.STEP_2.CHOICE_2, CHOICE_IDS.JOB.STEP_2.CHOICE_4]
            }
          ],
        },
        {
          id: STEP_IDS.JOB.STEP_2,
          text: "»öi se spune cƒÉ un task este prea greu pentru tine din cauza condi»õiei tale.",
          situation: "Task dificil",
          choices: [
            {
              id: CHOICE_IDS.JOB.STEP_2.CHOICE_1,
              text: "√éncerci sƒÉ le demonstrezi cƒÉ po»õi sƒÉ-l faci",
              personalStateChange: 5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.JOB.STEP_3.CHOICE_1, CHOICE_IDS.JOB.STEP_3.CHOICE_2]
            },
            {
              id: CHOICE_IDS.JOB.STEP_2.CHOICE_2,
              text: "Ai rƒÉbdare »ôi nu renun»õi p√¢nƒÉ c√¢nd reu»ôe»ôti",
              personalStateChange: 5,
              socialRelationsChange: 0,
              blocks: [CHOICE_IDS.JOB.STEP_3.CHOICE_1, CHOICE_IDS.JOB.STEP_3.CHOICE_3]
            },
            {
              id: CHOICE_IDS.JOB.STEP_2.CHOICE_3,
              text: "Renun»õi",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.JOB.STEP_3.CHOICE_2, CHOICE_IDS.JOB.STEP_3.CHOICE_3]
            },
            {
              id: CHOICE_IDS.JOB.STEP_2.CHOICE_4,
              text: "Ceri modificarea task-ului sau ajutor suplimentar",
              personalStateChange: 0,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.JOB.STEP_3.CHOICE_3, CHOICE_IDS.JOB.STEP_3.CHOICE_5]
            },
            {
              id: CHOICE_IDS.JOB.STEP_2.CHOICE_5,
              text: "√éi √Æntrebi pe al»õi colegi cum au reu»ôit ei sƒÉ facƒÉ task-uri similare",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.JOB.STEP_3.CHOICE_3, CHOICE_IDS.JOB.STEP_3.CHOICE_4]
            }
          ],
        },
        {
          id: STEP_IDS.JOB.STEP_3,
          text: "√én interac»õiunea cu clien»õii, observi cƒÉ mul»õi te privesc cu compasiune exageratƒÉ sau √Æ»õi pl√¢ng de milƒÉ.",
          situation: "Interac»õiunea cu clien»õii",
          choices: [
            {
              id: CHOICE_IDS.JOB.STEP_3.CHOICE_1,
              text: "Le spui cƒÉ e»ôti capabil »ôi nu vrei mila lor",
              personalStateChange: 5,
              socialRelationsChange: 0,
              blocks: []
            },
            {
              id: CHOICE_IDS.JOB.STEP_3.CHOICE_2,
              text: "Ignori »ôi acumulezi durerea √Æn tine",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: []
            },
            {
              id: CHOICE_IDS.JOB.STEP_3.CHOICE_3,
              text: "Renun»õi »ôi pleci de la muncƒÉ",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: []
            },
            {
              id: CHOICE_IDS.JOB.STEP_3.CHOICE_4,
              text: "√éncerci sƒÉ explici cu rƒÉbdare cƒÉ po»õi face job-ul",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: []
            },
            {
              id: CHOICE_IDS.JOB.STEP_3.CHOICE_5,
              text: "R√¢zi »ôi iei situa»õia cu umor pentru a detensiona atmosfera",
              personalStateChange: 0,
              socialRelationsChange: 0,
              blocks: []
            }
          ],
        },
      ],
      introspection: {
        text: "DupƒÉ c√¢teva luni la serviciu, reflectezi asupra capacitƒÉ»õilor tale profesionale »ôi nevoii de sprijin.",
        positiveChoice: "Faptul cƒÉ nu mƒÉ pot deplasa nu √ÆnseamnƒÉ cƒÉ nu am alte capabilitƒÉ»õi",
        negativeChoice: "Nu am abilitƒÉ»õi pentru a putea munci",
      },
    },

    {
      title: "Locuin»õa",
      steps: [
        {
          id: STEP_IDS.HOUSING.STEP_1,
          text: "E»ôti singur acasƒÉ »ôi te confrun»õi cu dificultƒÉ»õi fizice majore. Ai cƒÉzut din pat »ôi nu po»õi ajunge la cƒÉrucior.",
          situation: "CƒÉdere din pat",
          choices: [
            {
              id: CHOICE_IDS.HOUSING.STEP_1.CHOICE_1,
              text: "√éncerci sƒÉ ajungi la telefon »ôi depui mult efort",
              personalStateChange: 0,
              socialRelationsChange: 0,
              blocks: [CHOICE_IDS.HOUSING.STEP_2.CHOICE_2, CHOICE_IDS.HOUSING.STEP_2.CHOICE_5]
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_1.CHOICE_2,
              text: "Suni un prieten sƒÉ te ajute",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.HOUSING.STEP_2.CHOICE_1, CHOICE_IDS.HOUSING.STEP_2.CHOICE_2]
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_1.CHOICE_3,
              text: "√éncerci sƒÉ ridici singur scaunul, chiar dacƒÉ e foarte greu »ôi te va extenua",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.HOUSING.STEP_2.CHOICE_3, CHOICE_IDS.HOUSING.STEP_2.CHOICE_4]
            }
          ],
        },
        {
          id: STEP_IDS.HOUSING.STEP_2,
          text: "Frigiderul este greu accesibil »ôi ai nevoie sƒÉ iei m√¢ncare.",
          situation: "Acces m√¢ncare",
          choices: [
            {
              id: CHOICE_IDS.HOUSING.STEP_2.CHOICE_1,
              text: "Folose»ôti un cle»ôte / alt ajutor »ôi ceri sprijin prietenilor",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.HOUSING.STEP_3.CHOICE_1, CHOICE_IDS.HOUSING.STEP_3.CHOICE_5]
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_2.CHOICE_2,
              text: "√éncerci singur »ôi te frustrezi",
              personalStateChange: 0,
              socialRelationsChange: 0,
              blocks: [CHOICE_IDS.HOUSING.STEP_3.CHOICE_2, CHOICE_IDS.HOUSING.STEP_3.CHOICE_4]
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_2.CHOICE_3,
              text: "Renun»õi »ôi rƒÉm√¢i fƒÉrƒÉ m√¢ncare pentru moment",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: [CHOICE_IDS.HOUSING.STEP_3.CHOICE_2, CHOICE_IDS.HOUSING.STEP_3.CHOICE_3]
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_2.CHOICE_4,
              text: "Cau»õi alternative mai accesibile",
              personalStateChange: 0,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.HOUSING.STEP_3.CHOICE_4, CHOICE_IDS.HOUSING.STEP_3.CHOICE_5]
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_2.CHOICE_5,
              text: "Ceri ajutor la livrare sau de la vecin",
              personalStateChange: 0,
              socialRelationsChange: 5,
              blocks: [CHOICE_IDS.HOUSING.STEP_3.CHOICE_3, CHOICE_IDS.HOUSING.STEP_3.CHOICE_5]
            }
          ],
        },
        {
          id: STEP_IDS.HOUSING.STEP_3,
          text: "Este o zi toridƒÉ »ôi geamurile sunt greu accesibile pentru tine.",
          situation: "Ventilare",
          choices: [
            {
              id: CHOICE_IDS.HOUSING.STEP_3.CHOICE_1,
              text: "Ceri ajutorul unui prieten sau vecin",
              personalStateChange: 5,
              socialRelationsChange: 5,
              blocks: []
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_3.CHOICE_2,
              text: "√éncerci singur »ôi te frustrezi",
              personalStateChange: 0,
              socialRelationsChange: 0,
              blocks: []
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_3.CHOICE_3,
              text: "Nu faci nimic, te adaptezi",
              personalStateChange: -5,
              socialRelationsChange: -5,
              blocks: []
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_3.CHOICE_4,
              text: "Folose»ôti ventilatoare sau aer condi»õionat",
              personalStateChange: 0,
              socialRelationsChange: 0,
              blocks: []
            },
            {
              id: CHOICE_IDS.HOUSING.STEP_3.CHOICE_5,
              text: "√éncerci sƒÉ improvizezi un sistem de deschidere accesibil",
              personalStateChange: 0,
              socialRelationsChange: 5,
              blocks: []
            }
          ],
        },
      ],
      introspection: {
        text: "Privind √Ænapoi la experien»õele tale de via»õƒÉ independentƒÉ, reflectezi asupra sprijinului primit de la al»õii.",
        positiveChoice: "Da, √Æntotdeauna vor exista oameni de √Æncredere",
        negativeChoice: "Am √Æncercat »ôi nu a mers, poate ar trebui sƒÉ renun»õ",
      },
    },
  ],

  endings: {
    positive: {
      title: "Integrare »ôi Succes",
      text: "Ai reu»ôit sƒÉ navighezi cu succes provocƒÉrile vie»õii, construind rela»õii puternice »ôi men»õin√¢ndu-»õi o stare emo»õionalƒÉ pozitivƒÉ. Experien»õele tale au devenit o sursƒÉ de inspira»õie pentru al»õii, iar tu ai devenit un avocat pentru incluziune »ôi accesibilitate. Via»õa ta demonstreazƒÉ cƒÉ dizabilitatea nu definee»ôte limitele unei persoane.",
    },
    neutral: {
      title: "Echilibru »ôi Acceptare",
      text: "Ai gƒÉsit un echilibru √Æn via»õƒÉ, cu momente bune »ôi rele. De»ôi √ÆncƒÉ mai √Ænt√¢mpini provocƒÉri, ai dezvoltat strategii de adaptare »ôi ai construit o re»õea de sprijin solidƒÉ. Continui sƒÉ cre»ôti »ôi sƒÉ √Ænve»õi, accept√¢nd cƒÉ via»õa are sui»ôuri »ôi cobor√¢»ôuri pentru toatƒÉ lumea.",
    },
    negative: {
      title: "Reflec»õie »ôi Speran»õƒÉ",
      text: "CƒÉlƒÉtoria ta a fost dificilƒÉ »ôi ai trecut prin momente √Æntunecate. Important este sƒÉ √Æ»õi aminte»ôti cƒÉ nu e»ôti singur »ôi cƒÉ existƒÉ √Æntotdeauna ajutor disponibil. Fiecare zi nouƒÉ oferƒÉ o »ôansƒÉ de schimbare »ôi √ÆmbunƒÉtƒÉ»õire. Te rugƒÉm sƒÉ contactezi o linie de ajutor dacƒÉ ai nevoie de sprijin.",
    },
  },
};

// Create the story graph from your existing game data
export const storyGraph: StoryGraph = (() => {
  const nodes = new Map<string, StoryNode>();
  const edges = new Map<string, ChoiceEdge>();

  // Build nodes from scenes and steps
  gameData.scenes.forEach((scene, sceneIndex) => {
    scene.steps.forEach((step, stepIndex) => {
      const node: StoryNode = {
        id: step.id,
        text: step.text,
        situation: step.situation,
        sceneId: `scene_${sceneIndex}`,
        stepIndex: stepIndex,
        allChoices: step.choices
      };
      nodes.set(step.id, node);

      // Create edges for each choice
      step.choices.forEach(choice => {
        const nextStepIndex = stepIndex + 1;
        const nextSceneIndex = nextStepIndex >= scene.steps.length ? sceneIndex + 1 : sceneIndex;
        const nextStep = nextStepIndex < scene.steps.length
          ? scene.steps[nextStepIndex]
          : (gameData.scenes[nextSceneIndex]?.steps[0]);

        const toNode = nextStep ? nextStep.id : 'end';

        const edge: ChoiceEdge = {
          id: choice.id,
          fromNode: step.id,
          toNode: toNode,
          choice: choice,
          blocks: choice.blocks || []
        };
        edges.set(choice.id, edge);
      });
    });
  });

  return { nodes, edges };
})();
